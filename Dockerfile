FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGF6dXJlLWFwYgpkZXNjcmlwdGlvbjogVk0gcHJvdmlzaW9uZWQg\
aW4gQXp1cmUgcHVibGljIGNsb3VkIApiaW5kYWJsZTogRmFsc2UKYXN5bmM6IG9wdGlvbmFsCm1l\
dGFkYXRhOgogIGRpc3BsYXlOYW1lOiBBenVyZSBWTQogIGltYWdlVXJsOiBodHRwczovL2F6dXJl\
bWFya2V0cGxhY2UubWljcm9zb2Z0LmNvbS9pbWFnZXMvVmlydHVhbE1hY2hpbmUuc3ZnIApwbGFu\
czoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBUaGlzIGRlZmF1bHQgcGxhbiBk\
ZXBsb3lzIEF6dXJlIFZNCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YToKICAgICAgZGlzcGxh\
eU5hbWU6IERlZmF1bHQKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0g\
bmFtZTogYXp1cmVfcmVnaW9uCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICBkZWZhdWx0\
OiB3ZXN0dXMKICAgICAgICB0aXRsZTogTmFtZQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBl\
bnVtOiBbJ3dlc3R1cyddCiAgICAgICAgZGlzcGxheV9ncm91cDogQXp1cmUgUmVnaW9uCiAgICAg\
IC0gbmFtZTogYXp1cmVfdm1faW1hZ2UKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIGRl\
ZmF1bHQ6IENlbnRPU183LjQKICAgICAgICB0eXBlOiBlbnVtCiAgICAgICAgZW51bTogWydDZW50\
T1NfNy40J10KICAgICAgICBkaXNwbGF5X3R5cGU6IHNlbGVjdAogICAgICAgIHRpdGxlOiBJbWFn\
ZQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IFZNIFNldHRpbmdzCiAgICAgIC0gbmFtZTogYXp1cmVf\
dm1fbmFtZQogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGVmYXVsdDogdGVzdHZtMDAx\
CiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgdGl0bGU6IFZNIG5hbWUKICAgICAgICBkaXNw\
bGF5X2dyb3VwOiBWTSBTZXR0aW5ncwogICAgICAtIG5hbWU6IGF6dXJlX3ZtX3NpemUKICAgICAg\
ICBkZWZhdWx0OiBTdGFuZGFyZF9EUzFfdjIKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAg\
IHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbJ1N0YW5kYXJkX0RTMV92MiddCiAgICAgICAgZGlz\
cGxheV90eXBlOiBzZWxlY3QKICAgICAgICB0aXRsZTogU2l6ZQogICAgICAgIGRpc3BsYXlfZ3Jv\
dXA6IFZNIFNldHRpbmdzIAogICAgICAtIG5hbWU6IGF6dXJlX3ZtX3VzZXJuYW1lCiAgICAgICAg\
ZGVmYXVsdDogYXp1cmUtdXNlcgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdHlwZTog\
c3RyaW5nCiAgICAgICAgdGl0bGU6IFZNIFVzZXJuYW1lCiAgICAgICAgZGlzcGxheV9ncm91cDog\
Vk0gU2V0dGluZ3MKICAgICAgLSBuYW1lOiBhenVyZV92bV9wYXNzd29yZAogICAgICAgIGRlZmF1\
bHQ6IGNoYW5nZW1lMSEKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIHR5cGU6IHN0cmlu\
ZwogICAgICAgIHRpdGxlOiBWTSBQYXNzd29yZAogICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dv\
cmQgCiAgICAgICAgZGlzcGxheV9ncm91cDogVk0gU2V0dGluZ3MKICAtIG5hbWU6IHByZW1pdW0K\
ICAgIGRlc2NyaXB0aW9uOiBUaGlzIHByZW1pdW0gcGxhbiBkZXBsb3lzIGRpZmZlcmVudCB0eXBl\
IGFuZCBzaXplIEF6dXJlIFZNIGluIGRpZmZlcmVudCBBenVyZSByZWdpb25zIAogICAgZnJlZTog\
ZmFsc2UKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogUHJlbWl1bQogICAgICBjb3N0\
OiAkMTAuMDAKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogYXp1cmVfcmVnaW9uCiAgICAg\
ICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICBkZWZhdWx0OiB3ZXN0dXMKICAgICAgICB0aXRsZTog\
TmFtZQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICBlbnVtOiBbJ3dlc3R1cycsICdlYXN0dXMn\
XQogICAgICAgIGRpc3BsYXlfZ3JvdXA6IEF6dXJlIFJlZ2lvbgogICAgICAtIG5hbWU6IGF6dXJl\
X3ZtX2ltYWdlCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICBkZWZhdWx0OiBDZW50T1Nf\
Ny40CiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06IFsnQ2VudE9TXzcuNCcsICdSSEVM\
XzcuNCddCiAgICAgICAgZGlzcGxheV90eXBlOiBzZWxlY3QKICAgICAgICB0aXRsZTogSW1hZ2UK\
ICAgICAgICBkaXNwbGF5X2dyb3VwOiBWTSBTZXR0aW5ncwogICAgICAtIG5hbWU6IGF6dXJlX3Zt\
X25hbWUKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIGRlZmF1bHQ6IHRlc3R2bTAwMQog\
ICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBWTSBuYW1lCiAgICAgICAgZGlzcGxh\
eV9ncm91cDogVk0gU2V0dGluZ3MKICAgICAgLSBuYW1lOiBhenVyZV92bV9zaXplCiAgICAgICAg\
ZGVmYXVsdDogU3RhbmRhcmRfRFMxX3YyCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0\
eXBlOiBlbnVtCiAgICAgICAgZW51bTogWydTdGFuZGFyZF9EUzFfdjInLCAnU3RhbmRhcmRfRFMy\
X3YyJywgJ1N0YW5kYXJkX0RTM192MicsICdTdGFuZGFyZF9EUzRfdjInLCAnU3RhbmRhcmRfRFM1\
X3YyJ10KICAgICAgICBkaXNwbGF5X3R5cGU6IHNlbGVjdAogICAgICAgIHRpdGxlOiBTaXplCiAg\
ICAgICAgZGlzcGxheV9ncm91cDogVk0gU2V0dGluZ3MKICAgICAgLSBuYW1lOiBhenVyZV92bV91\
c2VybmFtZQogICAgICAgIGRlZmF1bHQ6IGF6dXJlLXVzZXIKICAgICAgICByZXF1aXJlZDogdHJ1\
ZQogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHRpdGxlOiBWTSBVc2VybmFtZQogICAgICAg\
IGRpc3BsYXlfZ3JvdXA6IFZNIFNldHRpbmdzCiAgICAgIC0gbmFtZTogYXp1cmVfdm1fcGFzc3dv\
cmQKICAgICAgICBkZWZhdWx0OiBjaGFuZ2VtZTEhCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAg\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICB0aXRsZTogVk0gUGFzc3dvcmQKICAgICAgICBkaXNw\
bGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgZGlzcGxheV9ncm91cDogVk0gU2V0dGluZ3MKCg=="












































COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}

RUN yum -y install python-pip && yum clean all

RUN pip --version && pip install ansible[azure]

#RUN pip --version

USER apb
